
<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit:cover">
    <link rel="manifest" href="/pwa/pwa.webmanifest">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

<!-- Begin Jekyll SEO tag v2.6.1 -->
    <title>linux-remote PWA Client</title>

  </head>

  <body>
    <h1>Hello PWA</h1>
    <button id="install" disabled="disabled">Install</button>
    <script>
      navigator.serviceWorker.register('/pwa/sw.js');
    </script>
    <script>
      window.addEventListener('beforeinstallprompt', (event) => {
          event.preventDefault();  // Chrome <= 67 可以阻止显示
          const btn = document.getElementById('install');
          btn.disabled = false;
          btn.addEventListener('click', function(){
            event.prompt();
            event.userChoice.then( choiceResult => {
              if (choiceResult.outcome === 'accepted') {
                console.log('用户已同意添加到桌面')
              } else {
                console.log('用户已取消添加到桌面')
              }
            })
          })
      });
    </script>
  </body>
</html>
